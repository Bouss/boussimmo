<article class="property-ad{% if 'now'|date('Y-m-d') == ad.publishedAt|date('Y-m-d') %} property-ad--new{% endif %}">
    <a class="link" target="_blank" rel="noopener noreferrer" href="{{ ad.url }}">
        <div class="photo-wrapper">
            <img class="photo" src="{% if ad.photo is not empty %}{{ ad.photo }}{% else %}{{ asset('build/home-solid.svg') }}{% endif %}" alt="Photo du bien immobilier">
            {% if ad.newBuild %}
                <div class="new-build-tag">NEUF</div>
            {% endif %}
        </div>
        <div class="main-section">
            <header>
                <h3 class="price">
                    {{ ad.price is not null ? ad.price|number_format|trim('0', 'right')|trim(',', 'right') : 'N/A' }} &euro;
                </h3>
            </header>
            <p>
                <span class="area{% if ad.area is null %} unknown{% endif %}">
                    {{ ad.area is not null ? ad.area|number_format|trim('0', 'right')|trim(',', 'right') : 'N/A' }}&nbsp;m&sup2;
                </span>
                &nbsp;•&nbsp;
                <span class="rooms-count{% if ad.roomsCount is null %} unknown{% endif %}">{{ ad.roomsCount|default('N/A') }}&nbsp;pièces</span>
            </p>
            <p class="location">
                <i class="fas fa-map-marker-alt fa-fw"></i>
                {% if ad.name is not null %}<span class="name">{{ ad.name|upper }}</span>,&nbsp;{% endif %}
                {{ ad.location }}
            </p>
            <img class="provider-logo" src="{{ asset('build/providers/' ~ ad|provider_logo) }}" alt="{{ ad.provider }}">
        </div>
        <div class="publication-date">
            <i class="far fa-clock fa-fw"></i>
            <time datetime="{{ ad.publishedAt|date('Y-m-d H:i') }}" data-toggle="tooltip" data-placement="top" title="{{ ad.publishedAt|localizeddate('medium') }}">
                {{ ad.publishedAt|days_ago }}
            </time>
        </div>
    </a>
    {% if ad.duplicates is not empty %}
        <div class="duplicate-container">
            {% for duplicate in ad.duplicates|slice(0, 5) %}
                <article class="duplicate">
                    <a class="link" target="_blank" rel="noopener noreferrer" href="{{ duplicate.url }}">
                        <img class="photo" src="{% if duplicate.photo is not empty %}{{ duplicate.photo }}{% else %}{{ asset('build/home-solid.svg') }}{% endif %}" alt="Photo du bien immobilier">
                        <span class="label">
                            Aussi présent sur&nbsp;
                            <img class="provider-logo" src="{{ asset('build/providers/' ~ duplicate|provider_logo) }}" alt="{{ duplicate.provider }}">
                        </span>
                    </a>
                </article>
            {% endfor %}
        </div>
    {% endif %}
</article>
